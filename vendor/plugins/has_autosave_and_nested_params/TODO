NestedParams:
- Add an option to discard any completely empty hashes in the array passed to the writer method.
- Wrap everything in a transaction.